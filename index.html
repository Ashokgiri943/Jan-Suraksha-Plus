<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ - ‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d32f2f">
    <style>
        :root { --primary-red: #d32f2f; --success-green: #2e7d32; }
        * { box-sizing: border-box; transition: 0.3s ease; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #f0f2f5; margin: 0; padding: 10px; display: flex; justify-content: center; }
        .app-card { background: #fff; border-radius: 25px; padding: 25px; width: 100%; max-width: 400px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); border-top: 8px solid var(--primary-red); position: relative; }
        .header { color: var(--primary-red); font-size: 28px; font-weight: bold; margin-bottom: 25px; text-align: center; }
        .top-icons { position: absolute; top: 18px; right: 20px; display: flex; gap: 15px; }
        .icon-btn { background: #f9f9f9; border: 1px solid #eee; font-size: 18px; cursor: pointer; color: var(--primary-red); width: 42px; height: 42px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        input { width: 100%; padding: 15px; margin-bottom: 12px; border: 2px solid #f0f0f0; border-radius: 12px; font-size: 16px; outline: none; background: #fafafa; }
        input:disabled { background: #e8f5e9; color: var(--success-green); font-weight: bold; }
        .btn-row { display: flex; gap: 10px; margin-bottom: 25px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 12px; font-weight: bold; color: white; cursor: pointer; }
        .save { background: var(--success-green); } .edit { background: #616161; }
        .sos-btn { background: radial-gradient(circle, #ff5252, #b71c1c); width: 140px; height: 140px; border-radius: 50%; border: 8px solid #fff; color: white; font-size: 32px; font-weight: bold; display: block; margin: 0 auto 25px; cursor: pointer; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.7); } 70% { box-shadow: 0 0 0 35px rgba(211, 47, 47, 0); } 100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); } }
        .siren-btn { width: 100%; padding: 18px; border-radius: 12px; background: #6a1b9a; color: white; font-weight: bold; border: none; margin-bottom: 25px; font-size: 18px; cursor: pointer; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .q-btn { aspect-ratio: 1/1; border: none; border-radius: 18px; color: white; font-weight: bold; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 13px; cursor: pointer; }
        .p-btn { background: #1565c0; } .f-btn { background: #e65100; } .a-btn { background: var(--success-green); }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 10000; padding: 20px; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-content { background: white; width: 100%; max-width: 400px; border-radius: 25px; padding: 30px; text-align: center; position: relative; }
        .star-row { font-size: 35px; color: #ffca28; margin: 20px 0; cursor: pointer; }
        .footer { margin-top: 30px; font-size: 15px; text-align: center; border-top: 1px solid #eee; padding-top: 20px; color: #555; font-weight: bold; }
    </style>
</head>
<body>

<div id="info-modal" class="modal">
    <div class="modal-content" style="text-align: left;">
        <h2 style="color:var(--primary-red); border-bottom: 2px solid #eee; padding-bottom: 10px;">‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ø‡§ï‡§æ ‡§è‡§µ‡§Ç ‡§®‡§ø‡§Ø‡§Æ</h2>
        <p><b>‡•ß. ‡§™‡§∞‡§ø‡§ö‡§Ø:</b> '‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ' ‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä ‡§ú‡•Ä ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§è‡§ï ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ê‡§™ ‡§π‡•à‡•§</p>
        <p><b>‡•®. ‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø‡§§‡§æ:</b> ‡§Ü‡§™‡§ï‡•á ‡§®‡§Ç‡§¨‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§´‡•ã‡§® ‡§Æ‡•á‡§Ç ‡§π‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§π‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>
        <p><b>‡•©. ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï:</b> ‡§µ‡§ø‡§ï‡§æ‡§∏‡§ï‡§∞‡•ç‡§§‡§æ: ‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä, ‡§∏‡•ç‡§•‡§æ‡§®: ‡§ñ‡§ü‡•Ä‡§Æ‡§æ, ‡§â‡§§‡•ç‡§§‡§∞‡§æ‡§ñ‡§Ç‡§°‡•§</p>
        <button onclick="closeModal('info-modal')" style="width:100%; background:var(--primary-red); color:white; border:none; padding:15px; border-radius:12px; font-weight:bold; cursor:pointer; margin-top:15px;">‡§†‡•Ä‡§ï ‡§π‡•à</button>
    </div>
</div>

<div id="rating-modal" class="modal">
    <div class="modal-content">
        <h2 style="color:var(--primary-red);">‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó ‡§¶‡•á‡§Ç ‚≠ê</h2>
        <p><b>‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä</b> ‡§ú‡•Ä ‡§ï‡•á ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•Ä ‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó ‡§ö‡•Å‡§®‡•á‡§Ç:</p>
        <div class="star-row">
            <span onclick="giveRate(1)">‚≠ê</span><span onclick="giveRate(2)">‚≠ê</span><span onclick="giveRate(3)">‚≠ê</span><span onclick="giveRate(4)">‚≠ê</span><span onclick="giveRate(5)">‚≠ê</span>
        </div>
        <p id="rate-msg" style="color:var(--success-green); font-weight:bold;"></p>
        <button onclick="closeModal('rating-modal')" style="width:100%; background:#616161; color:white; border:none; padding:12px; border-radius:10px; cursor:pointer;">‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç</button>
    </div>
</div>

<div class="app-card">
    <div class="top-icons">
        <button class="icon-btn" onclick="shareApp()">üîó</button>
        <button class="icon-btn" onclick="openModal('info-modal')">‚ìò</button>
    </div>
    <div class="header">‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</div>
    
    <input type="tel" id="n1" placeholder="‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§®‡§Ç‡§¨‡§∞ 1">
    <input type="tel" id="n2" placeholder="‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§®‡§Ç‡§¨‡§∞ 2">
    <input type="url" id="wg" placeholder="‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§ó‡•ç‡§∞‡•Å‡§™ ‡§≤‡§ø‡§Ç‡§ï ‡§°‡§æ‡§≤‡•á‡§Ç">

    <div class="btn-row">
        <button class="btn save" onclick="lock()">üíæ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
        <button class="btn edit" onclick="unlock()">‚úèÔ∏è ‡§è‡§°‡§ø‡§ü</button>
    </div>

    <button class="sos-btn" onclick="sos()">SOS</button>
    <button id="s" class="siren-btn" onclick="tS()">üö® ‡§∏‡§æ‡§Ø‡§∞‡§® ‡§¨‡§ú‡§æ‡§è‡§Ç</button>

    <div class="grid">
        <button class="q-btn p-btn" onclick="window.open('tel:112')">üëÆ ‡§™‡•Å‡§≤‡§ø‡§∏</button>
        <button class="q-btn f-btn" onclick="window.open('tel:101')">üî• ‡§´‡§æ‡§Ø‡§∞</button>
        <button class="q-btn a-btn" onclick="window.open('tel:108')">üöë ‡§è‡§Æ‡•ç‡§¨‡•Å‡§≤‡•á‡§Ç‡§∏</button>
    </div>

    <div style="text-align:center; margin-top:15px;">
        <button onclick="openModal('rating-modal')" style="background:none; border:1px solid var(--primary-red); color:var(--primary-red); padding:5px 15px; border-radius:20px; font-size:12px; cursor:pointer; font-weight:bold;">‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó ‡§¶‡•á‡§Ç ‚≠ê</button>
    </div>

    <div class="footer">‡§µ‡§ø‡§ï‡§∏‡§ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ: ‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä</div>
</div>

<script>
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    
    function giveRate(s) {
        document.getElementById('rate-msg').innerText = "‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™‡§®‡•á " + s + " ‡§∏‡•ç‡§ü‡§æ‡§∞ ‡§¶‡§ø‡§è‡•§";
        setTimeout(() => closeModal('rating-modal'), 1500);
    }

    function lock() {
        localStorage.setItem('n1', document.getElementById('n1').value);
        localStorage.setItem('n2', document.getElementById('n2').value);
        localStorage.setItem('wg', document.getElementById('wg').value);
        toggleFields(true);
        alert("‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä: ‡§Ü‡§™‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à!");
    }

    function unlock() { toggleFields(false); }

    function toggleFields(status) {
        ['n1', 'n2', 'wg'].forEach(id => document.getElementById(id).disabled = status);
    }

    window.onload = () => {
        ['n1', 'n2', 'wg'].forEach(id => {
            let val = localStorage.getItem(id);
            if(val) { document.getElementById(id).value = val; document.getElementById(id).disabled = true; }
        });
    };

    function sos() {
        let n1 = localStorage.getItem('n1');
        let wg = localStorage.getItem('wg');
        if(!n1) return alert("‡§™‡§π‡§≤‡•á ‡§®‡§Ç‡§¨‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç!");
        
        navigator.geolocation.getCurrentPosition(p => {
            let loc = `http://maps.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
            let msg = `‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡•Ç‡§ö‡§®‡§æ! ‡§Æ‡•à‡§Ç ‡§ñ‡§§‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§π‡•Ç‡§Å‡•§ ‡§≤‡•ã‡§ï‡•á‡§∂‡§®: ${loc}`;
            
            // ‡•ß. ‡§™‡§π‡§≤‡•á ‡§®‡§Ç‡§¨‡§∞ ‡•ß ‡§™‡§∞ SMS ‡§≠‡•á‡§ú‡•á‡§Ç
            window.open(`sms:${n1}?body=${encodeURIComponent(msg)}`, '_blank');
            
            // ‡•®. ‡•® ‡§∏‡•á‡§ï‡§Ç‡§° ‡§¨‡§æ‡§¶ ‡§∏‡•Ä‡§ß‡•á ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§ó‡•ç‡§∞‡•Å‡§™ ‡§≤‡§ø‡§Ç‡§ï ‡§ñ‡•ã‡§≤‡•á‡§Ç
            if(wg) {
                setTimeout(() => {
                    window.open(wg, '_blank');
                }, 2000);
            }
        }, () => alert("GPS ‡§ë‡§® ‡§ï‡§∞‡•á‡§Ç!"), {enableHighAccuracy:true});
    }

    let ctx = null, o = null, active = false, interval = null;
    function tS() {
        if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
        if(!active) {
            o = ctx.createOscillator(); let g = ctx.createGain(); o.type = 'triangle';
            o.connect(g); g.connect(ctx.destination); o.start(); active = true;
            document.getElementById('s').innerText = "üõë ‡§∏‡§æ‡§Ø‡§∞‡§® ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç";
            interval = setInterval(() => {
                o.frequency.exponentialRampToValueAtTime(880, ctx.currentTime + 0.5);
                o.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 1);
            }, 1000);
        } else { if(o) o.stop(); clearInterval(interval); active = false; document.getElementById('s').innerText = "üö® ‡§∏‡§æ‡§Ø‡§∞‡§® ‡§¨‡§ú‡§æ‡§è‡§Ç"; }
    }

    function shareApp() {
        const text = "‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä ‡§ú‡•Ä ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ '‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ' ‡§ê‡§™: ";
        if (navigator.share) navigator.share({ title: '‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ', text: text, url: window.location.href });
        else prompt("‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç:", window.location.href);
    }

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js')
        .then(() => console.log("‡§Ö‡§∂‡•ã‡§ï ‡§ó‡§ø‡§∞‡•Ä: ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§∏‡•á‡§µ‡§æ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à!"));
    }
</script>
</body>
</html>
