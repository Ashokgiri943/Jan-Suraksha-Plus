<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jan Suraksha - Emergency App</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d32f2f">
    <style>
        * { box-sizing: border-box; }
        body { font-family: 'Segoe UI', Arial; background: #f0f2f5; margin: 0; padding: 10px; display: flex; justify-content: center; }
        .app-card { background: #fff; border-radius: 20px; padding: 15px; width: 100%; max-width: 380px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border-top: 6px solid #d32f2f; position: relative; }
        .header { color: #d32f2f; font-size: 24px; font-weight: bold; margin-bottom: 20px; text-align: center; }
        .top-icons { position: absolute; top: 15px; right: 15px; display: flex; gap: 12px; }
        .icon-btn { background: #f0f2f5; border: none; font-size: 18px; cursor: pointer; color: #d32f2f; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        input { width: 100%; padding: 12px; margin-bottom: 10px; border: 2px solid #eee; border-radius: 10px; font-size: 14px; outline: none; }
        input:disabled { background: #e8f5e9; color: #2e7d32; font-weight: bold; }
        .btn-row { display: flex; gap: 8px; margin-bottom: 20px; }
        .btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-weight: bold; color: white; cursor: pointer; }
        .save { background: #2e7d32; } .edit { background: #757575; }
        .sos-btn { background: radial-gradient(circle, #ff5252, #b71c1c); width: 110px; height: 110px; border-radius: 50%; border: 6px solid #fff; color: white; font-size: 24px; font-weight: bold; display: block; margin: 0 auto 15px; cursor: pointer; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(211,47,47,0.7); } 70% { box-shadow: 0 0 0 20px rgba(211,47,47,0); } 100% { box-shadow: 0 0 0 0 rgba(211,47,47,0); } }
        .siren-btn { width: 100%; padding: 14px; border-radius: 10px; background: #6a1b9a; color: white; font-weight: bold; border: none; margin-bottom: 15px; font-size: 16px; }
        
        /* ‡§ó‡•ç‡§∞‡§ø‡§° ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§ú‡•ã ‡§ó‡§æ‡§Ø‡§¨ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§•‡§æ */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        .q-btn { aspect-ratio: 1/1; border: none; border-radius: 10px; color: white; font-weight: bold; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 11px; cursor: pointer; }
        .p-btn { background: #1565c0; } .f-btn { background: #e65100; } .a-btn { background: #2e7d32; }

        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; padding: 20px; align-items: center; justify-content: center; }
        .modal-content { background: white; width: 100%; max-width: 350px; border-radius: 20px; padding: 25px; position: relative; max-height: 80vh; overflow-y: auto; text-align: left; }
        .footer { margin-top: 20px; font-size: 13px; text-align: center; border-top: 1px solid #eee; padding-top: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div id="guide-modal" class="modal" style="display: flex;">
    <div class="modal-content">
        <h2 style="color:#d32f2f; text-align: center;">‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!</h2>
        <p><b>‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•Ä ‡§µ‡§ø‡§ß‡§ø:</b></p>
        <ul style="line-height: 1.6;">
            <li>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§≠‡§∞‡•á‡§Ç ‡§î‡§∞ <b>‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç</b>‡•§</li>
            <li>‡§Æ‡•Å‡§∏‡•Ä‡§¨‡§§ ‡§Æ‡•á‡§Ç <b>SOS</b> ‡§¶‡§¨‡§æ‡§è‡§Ç, ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§≠‡•á‡§ú ‡§¶‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§</li>
            <li>‡§≠‡•Ä‡•ú ‡§ï‡•á ‡§≤‡§ø‡§è <b>‡§∏‡§æ‡§Ø‡§∞‡§®</b> ‡§¨‡§ú‡§æ‡§è‡§Ç‡•§</li>
        </ul>
        <button onclick="closeGuide()" style="width:100%; background:#d32f2f; color:white; border:none; padding:15px; border-radius:10px; font-weight:bold; cursor:pointer;">‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
    </div>
</div>

<div id="info-modal" class="modal">
    <div class="modal-content">
        <h3 style="color:#d32f2f;">‡§™‡•ç‡§∞‡§æ‡§á‡§µ‡•á‡§∏‡•Ä ‡§™‡•â‡§≤‡§ø‡§∏‡•Ä</h3>
        <p><b>‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï:</b> giriashok44908@gmail.com</p>
        <button onclick="closeInfo()" style="width:100%; background:#757575; color:white; border:none; padding:10px; border-radius:10px; cursor:pointer;">‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
    </div>
</div>

<div class="app-card">
    <div class="top-icons">
        <button class="icon-btn" onclick="shareApp()">üîó</button>
        <button class="icon-btn" onclick="showInfo()">‚ìò</button>
    </div>
    <div class="header">‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ</div>
    <input type="tel" id="n1" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ 1">
    <input type="tel" id="n2" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ 2">
    <input type="url" id="wa" placeholder="‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§ó‡•ç‡§∞‡•Å‡§™ ‡§≤‡§ø‡§Ç‡§ï">
    <div class="btn-row">
        <button class="btn save" onclick="lock()">üíæ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
        <button class="btn edit" onclick="unlock()">‚úèÔ∏è ‡§è‡§°‡§ø‡§ü</button>
    </div>
    <button class="sos-btn" onclick="sos()">SOS</button>
    <button id="s" class="siren-btn" onclick="tS()">üö® ‡§∏‡§æ‡§Ø‡§∞‡§® ‡§¨‡§ú‡§æ‡§è‡§Ç</button>

    <div class="grid">
        <button class="q-btn p-btn" onclick="if(confirm('112 ‡§ï‡•â‡§≤?')) window.open('tel:112')">üëÆ<br>112</button>
        <button class="q-btn f-btn" onclick="if(confirm('101 ‡§ï‡•â‡§≤?')) window.open('tel:101')">üî•<br>101</button>
        <button class="q-btn a-btn" onclick="if(confirm('108 ‡§ï‡•â‡§≤?')) window.open('tel:108')">üöë<br>108</button>
    </div>

    <div class="footer">Developed by: Ashok Giri</div>
</div>

<script>
    if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('./sw.js'); }); }
    function closeGuide() { document.getElementById('guide-modal').style.display = 'none'; }
    function showInfo() { document.getElementById('info-modal').style.display = 'flex'; }
    function closeInfo() { document.getElementById('info-modal').style.display = 'none'; }
    function shareApp() { if (navigator.share) { navigator.share({ title: '‡§ú‡§® ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ', text: '‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ê‡§™', url: window.location.href }); } }

    const ids = ['n1', 'n2', 'wa'];
    function lock() { ids.forEach(id => { let v = document.getElementById(id).value; if(v){ localStorage.setItem(id, v); document.getElementById(id).disabled = true; } }); alert("‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§!"); }
    function unlock() { ids.forEach(id => document.getElementById(id).disabled = false); }
    window.onload = () => { ids.forEach(id => { let v = localStorage.getItem(id); if(v){ document.getElementById(id).value = v; document.getElementById(id).disabled = true; } }); };

    let ctx = null, o = null, active = false, interval = null;
    function tS() {
        if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
        if(!active) {
            o = ctx.createOscillator(); o.type = 'triangle'; o.connect(ctx.destination); o.start(); active = true;
            document.getElementById('s').innerText = "üõë ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç";
            interval = setInterval(() => { o.frequency.exponentialRampToValueAtTime(880, ctx.currentTime + 0.5); o.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 1); }, 1000);
        } else { if(o) o.stop(); clearInterval(interval); active = false; document.getElementById('s').innerText = "üö® ‡§∏‡§æ‡§Ø‡§∞‡§® ‡§¨‡§ú‡§æ‡§è‡§Ç"; }
    }

    function sos() {
        let n1 = localStorage.getItem('n1');
        if(!n1) return alert("‡§®‡§Ç‡§¨‡§∞ ‡§≠‡§∞‡•á‡§Ç!");
        navigator.geolocation.getCurrentPosition(p => {
            let loc = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
            let msg = `‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§®! ‡§Æ‡•á‡§∞‡•Ä ‡§≤‡•ã‡§ï‡•á‡§∂‡§®: ${loc}`;
            window.open(`sms:${n1}?body=${encodeURIComponent(msg)}`, '_blank');
        }, () => alert("GPS ‡§ë‡§® ‡§ï‡§∞‡•á‡§Ç!"), {enableHighAccuracy:true});
    }
</script>
</body>
</html>
